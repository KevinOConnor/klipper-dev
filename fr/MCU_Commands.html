
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="img/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.3">
    
    
      
        <title>Commandes MCU - Documentation Klipper</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.edf004c2.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="_klipper3d/css/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-138371409-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#commandes-mcu" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="." title="Documentation Klipper" class="md-header__button md-logo" aria-label="Documentation Klipper" data-md-component="logo">
      
  <img src="img/klipper.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation Klipper
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Commandes MCU
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5z"/></svg>
            </label>
          
        
      </form>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="Sélectionner la langue">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2 0-.68.06-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.923 7.923 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8.008 8.008 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.65 15.65 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="/" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="/zh/" hreflang="zh" class="md-select__link">
                    简体中文
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="/zh-Hant/" hreflang="zh-Hant" class="md-select__link">
                    繁體中文
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="/hu/" hreflang="hu" class="md-select__link">
                    Magyar
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="/it/" hreflang="it" class="md-select__link">
                    Italiano
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="/fr/" hreflang="fr" class="md-select__link">
                    Français
                  </a>
                </li>
                
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Effacer" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Klipper3d/klipper/" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Klipper3d/klipper
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Documentation Klipper" class="md-nav__button md-logo" aria-label="Documentation Klipper" data-md-component="logo">
      
  <img src="img/klipper.svg" alt="logo">

    </a>
    Documentation Klipper
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Klipper3d/klipper/" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Klipper3d/klipper
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Overview.html" class="md-nav__link">
        Vue d'ensemble
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Features.html" class="md-nav__link">
        Caractéristiques
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="FAQ.html" class="md-nav__link">
        Foire Aux Questions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Releases.html" class="md-nav__link">
        Versions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Config_Changes.html" class="md-nav__link">
        Changements de configuration
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Contact.html" class="md-nav__link">
        Contact
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Installation et configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Installation et configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Installation et configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Installation.html" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" type="checkbox" id="__nav_7_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2">
          Référence de configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Référence de configuration" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          Référence de configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Config_Reference.html" class="md-nav__link">
        Référence de configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Rotation_Distance.html" class="md-nav__link">
        Distance de rotation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Config_checks.html" class="md-nav__link">
        Contrôles de la configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_4" type="checkbox" id="__nav_7_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_4">
          Nivellement du lit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Nivellement du lit" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_4">
          <span class="md-nav__icon md-icon"></span>
          Nivellement du lit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Bed_Level.html" class="md-nav__link">
        Nivellement du lit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Delta_Calibrate.html" class="md-nav__link">
        Étalonnage Delta
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Probe_Calibrate.html" class="md-nav__link">
        Étalonnage de la sonde
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="BLTouch.html" class="md-nav__link">
        BL-Touch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Manual_Level.html" class="md-nav__link">
        Nivellement manuel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Bed_Mesh.html" class="md-nav__link">
        Maillage du Bed
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Endstop_Phase.html" class="md-nav__link">
        Phase de fin de course
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Axis_Twist_Compensation.md" class="md-nav__link">
        None
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_5" type="checkbox" id="__nav_7_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_5">
          Compensation de la résonance
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Compensation de la résonance" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_5">
          <span class="md-nav__icon md-icon"></span>
          Compensation de la résonance
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Resonance_Compensation.html" class="md-nav__link">
        Compensation de la résonance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Measuring_Resonances.html" class="md-nav__link">
        Mesurer la résonance
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Pressure_Advance.html" class="md-nav__link">
        Avance à la pression
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="G-Codes.html" class="md-nav__link">
        G-Codes
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_8" type="checkbox" id="__nav_7_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_8">
          Modèles de commandes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Modèles de commandes" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_8">
          <span class="md-nav__icon md-icon"></span>
          Modèles de commandes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Command_Templates.html" class="md-nav__link">
        Modèles de commandes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Status_Reference.html" class="md-nav__link">
        Référence des états
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="TMC_Drivers.html" class="md-nav__link">
        Pilotes de moteur pas à pas TMC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Multi_MCU_Homing.html" class="md-nav__link">
        Mise à l'origine et Palpage multi contrôleurs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Slicers.html" class="md-nav__link">
        Slicers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Skew_Correction.html" class="md-nav__link">
        Correction de l'équerrage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Exclude_Object.html" class="md-nav__link">
        Exclure des objets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Using_PWM_Tools.html" class="md-nav__link">
        Utilisation des outils PWM
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Documentation pour les développeurs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Documentation pour les développeurs" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Documentation pour les développeurs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Code_Overview.html" class="md-nav__link">
        Aperçu du code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Kinematics.html" class="md-nav__link">
        Cinématiques
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Protocol.html" class="md-nav__link">
        Protocole
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="API_Server.html" class="md-nav__link">
        Serveur API
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Commandes MCU
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="MCU_Commands.html" class="md-nav__link md-nav__link--active">
        Commandes MCU
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#commandes-de-demarrage" class="md-nav__link">
    Commandes de démarrage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-bas-niveau-du-microcontroleur" class="md-nav__link">
    Configuration bas niveau du microcontrôleur
  </a>
  
    <nav class="md-nav" aria-label="Configuration bas niveau du microcontrôleur">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objets-de-base-du-microcontroleur" class="md-nav__link">
    Objets de base du microcontrôleur
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commandes-courantes" class="md-nav__link">
    Commandes courantes
  </a>
  
    <nav class="md-nav" aria-label="Commandes courantes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commandes-de-moteurs-pas-a-pas" class="md-nav__link">
    Commandes de moteurs pas à pas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deplacer-la-file-dattente" class="md-nav__link">
    Déplacer la file d'attente
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandes-spi" class="md-nav__link">
    Commandes SPI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="CANBUS_protocol.html" class="md-nav__link">
        Protocole CANBUS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Debugging.html" class="md-nav__link">
        Débogage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Benchmarks.html" class="md-nav__link">
        Tests
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="CONTRIBUTING.html" class="md-nav__link">
        Contribuer à Klipper
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Packaging.html" class="md-nav__link">
        Packager Klipper
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Documents spécifiques à certains appareils
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Documents spécifiques à certains appareils" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Documents spécifiques à certains appareils
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Example_Configs.html" class="md-nav__link">
        Exemples de configurations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="SDCard_Updates.html" class="md-nav__link">
        Mises à jour via la carte SD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="RPi_microcontroller.html" class="md-nav__link">
        Microcontrôleur RPi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Beaglebone.html" class="md-nav__link">
        Beaglebone
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Bootloaders.html" class="md-nav__link">
        Chargeurs de démarrage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Bootloader_Entry.md" class="md-nav__link">
        None
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="CANBUS.html" class="md-nav__link">
        CANBUS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="CANBUS_Troubleshooting.html" class="md-nav__link">
        CANBUS Troubleshooting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="TSL1401CL_Filament_Width_Sensor.html" class="md-nav__link">
        Capteur de largeur de filament TSL1401CL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Hall_Filament_Width_Sensor.html" class="md-nav__link">
        Détecteur de largeur de filament à effet hall
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Sponsors.html" class="md-nav__link">
        Sponsors
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#commandes-de-demarrage" class="md-nav__link">
    Commandes de démarrage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-bas-niveau-du-microcontroleur" class="md-nav__link">
    Configuration bas niveau du microcontrôleur
  </a>
  
    <nav class="md-nav" aria-label="Configuration bas niveau du microcontrôleur">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objets-de-base-du-microcontroleur" class="md-nav__link">
    Objets de base du microcontrôleur
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commandes-courantes" class="md-nav__link">
    Commandes courantes
  </a>
  
    <nav class="md-nav" aria-label="Commandes courantes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commandes-de-moteurs-pas-a-pas" class="md-nav__link">
    Commandes de moteurs pas à pas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deplacer-la-file-dattente" class="md-nav__link">
    Déplacer la file d'attente
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandes-spi" class="md-nav__link">
    Commandes SPI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/Klipper3d/klipper/blob/master/docs/MCU_Commands.md" title="Editer cette page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="commandes-mcu">Commandes MCU<a class="headerlink" href="#commandes-mcu" title="Permanent link">&para;</a></h1>
<p>Ce document fournit des informations sur les commandes de bas niveau du microcontrôleur qui sont envoyées depuis le logiciel "hôte" Klipper et traitées par le firmware Klipper du microcontrôleur. Ce document n'est pas une référence faisant autorité pour ces commandes, ni une liste exclusive de toutes les commandes disponibles.</p>
<p>Ce document peut être utile aux développeurs souhaitant comprendre les commandes de bas niveau du microcontrôleur.</p>
<p>Voir le document <a href="Protocol.html">protocole</a> pour plus d'informations sur le format des commandes et leur transmission. Les commandes ici sont décrites en utilisant une syntaxe de style "printf" - pour ceux qui ne connaissent pas ce format, notez simplement que lorsqu'une séquence '%...' est vue, elle doit être remplacée par un entier réel. Par exemple, une description avec "count=%c" pourrait être remplacée par le texte "count=10". Notez que les paramètres qui sont considérés comme des "énumérations" (voir le document de protocole ci-dessus) prennent une valeur de chaîne qui est automatiquement convertie en une valeur entière pour le microcontrôleur. Ceci est courant avec les paramètres nommés "pin" (ou qui ont le suffixe "_pin").</p>
<h2 id="commandes-de-demarrage">Commandes de démarrage<a class="headerlink" href="#commandes-de-demarrage" title="Permanent link">&para;</a></h2>
<p>Il peut être nécessaire d'effectuer des actions ponctuelles pour configurer le microcontrôleur et ses périphériques. Cette section répertorie les commandes courantes disponibles à cette effet. Contrairement à la plupart des commandes de microcontrôleur, ces commandes s'exécutent dès leur réception et ne nécessitent aucune configuration particulière.</p>
<p>Commandes de démarrage courantes :</p>
<ul>
<li><code>set_digital_out pin=%u value=%c</code> : Cette commande configure immédiatement la broche donnée en tant que sortie numérique GPIO et la définit soit à un niveau bas (valeur=0) soit à un niveau haut (valeur=1 ). Cette commande peut être utile pour configurer la valeur initiale des LED et pour configurer la valeur initiale des broches de micro-pas du pilote de moteur pas à pas.</li>
<li><code>set_pwm_out pin=%u cycle_ticks=%u value=%hu</code> : Cette commande configurera la broche donnée pour utiliser la modulation de largeur d'impulsion (PWM) basée sur le matériel avec le nombre donné de cycle_ticks. Le "cycle_ticks" est le nombre de ticks d'horloge du MCU que chaque cycle de mise sous tension et hors tension doit durer. Une valeur cycle_ticks de 1 peut être utilisée pour demander le temps de cycle le plus rapide possible. Le paramètre "valeur" est compris entre 0 et 255, 0 indiquant un état entièrement désactivé et 255 indiquant un état entièrement activé. Cette commande peut être utile pour activer les ventilateurs de refroidissement du processeur et des buses.</li>
</ul>
<h2 id="configuration-bas-niveau-du-microcontroleur">Configuration bas niveau du microcontrôleur<a class="headerlink" href="#configuration-bas-niveau-du-microcontroleur" title="Permanent link">&para;</a></h2>
<p>La plupart des commandes du microcontrôleur nécessitent une configuration initiale avant de pouvoir être appelées. Cette section fournit une vue d'ensemble du processus de configuration. Cette section et les sections suivantes ne sont susceptibles d'intéresser que les développeurs intéressés par les détails internes de Klipper.</p>
<p>Lorsque l'hôte se connecte pour la première fois au microcontrôleur, il commence toujours par obtenir un dictionnaire de données (voir <a href="Protocol.html">protocole</a> pour plus d'informations). Une fois le dictionnaire de données obtenu, l'hôte vérifie si le microcontrôleur est dans un état "configuré" et le configure si ce n'est pas le cas. La configuration comprend les phases suivantes :</p>
<ul>
<li><code>get_config</code> : L'hôte commence par vérifier si le micro-contrôleur est déjà configuré. Le microcontrôleur répond à cette commande par un message de réponse « config ». Le logiciel du microcontrôleur démarre toujours dans un état non configuré à la mise sous tension. Il reste dans cet état jusqu'à ce que l'hôte termine les processus de configuration (en émettant une commande finalize_config). Si le microcontrôleur est déjà configuré à partir d'une session précédente (et est configuré avec les paramètres souhaités), aucune autre action n'est requise de la part de l'hôte et le processus de configuration se termine avec succès.</li>
<li><code>allocate_oids count=%c</code> : cette commande est envoyée pour informer le microcontrôleur du nombre maximal d'identifiants d'objet (oid) requis par l'hôte. Il n'e faut envoyer cette commande qu'une seule fois. Un oid est un identifiant entier alloué à chaque stepper, chaque fin de course et chaque broche gpio programmable. L'hôte détermine à l'avance le nombre d'oids dont il aura besoin pour faire fonctionner le matériel et le transmet au microcontrôleur afin qu'il puisse allouer suffisamment de mémoire pour stocker un mappage de l'oid à l'objet interne.</li>
<li><code>config_XXX oid=%c ...</code> : Par convention toute commande commençant par le préfixe "config_" crée un nouvel objet microcontrôleur et lui affecte l'oid donné. Par exemple, la commande config_digital_out configurera la broche spécifiée en tant que GPIO de sortie numérique et créera un objet interne que l'hôte peut utiliser pour planifier des modifications du GPIO donné. Le paramètre oid passé dans la commande config est sélectionné par l'hôte et doit être compris entre zéro et le nombre maximal fourni dans la commande allow_oids. Les commandes de configuration ne peuvent être exécutées que lorsque le microcontrôleur n'est pas dans un état configuré (c'est-à-dire avant que l'hôte n'envoie finalize_config) et après que la commande allow_oids a été envoyée.</li>
<li><code>finalize_config crc=%u</code> : La commande finalize_config fait passer le microcontrôleur d'un état non configuré à un état configuré. Le paramètre crc transmis au microcontrôleur est stocké et renvoyé à l'hôte dans les messages de réponse "config". Par convention, l'hôte prend un CRC 32 bits de la configuration qu'il demandera et au début des sessions de communication suivantes, il vérifie que le CRC stocké dans le microcontrôleur correspond exactement à son CRC souhaité. Si le CRC ne correspond pas, l'hôte saura que le microcontrôleur n'a pas été configuré correctement.</li>
</ul>
<h3 id="objets-de-base-du-microcontroleur">Objets de base du microcontrôleur<a class="headerlink" href="#objets-de-base-du-microcontroleur" title="Permanent link">&para;</a></h3>
<p>Cette section répertorie quelques commandes de configuration couramment utilisées.</p>
<ul>
<li><code>config_digital_out oid=%c pin=%u value=%c default_value=%c max_duration=%u</code> : cette commande crée un objet de microcontrôleur interne pour la "broche" GPIO donnée. La broche sera configurée en mode de sortie numérique et définie sur une valeur initiale telle que spécifiée par 'value' (0 pour bas, 1 pour haut). La création d'un objet digital_out permet à l'hôte de programmer des mises à jour GPIO pour la broche donnée à des heures spécifiées (voir la commande queue_digital_out décrite ci-dessous). Si le logiciel du microcontrôleur passe en mode d'arrêt, tous les objets digital_out configurés seront définis sur 'default_value'. Le paramètre 'max_duration' est utilisé pour implémenter un contrôle de sécurité - s'il est différent de zéro, il s'agit du nombre maximal de ticks d'horloge pendannt lesquels l'hôte peut définir le GPIO donné sur une valeur autre que celle par défaut sans autres mises à jour. Par exemple, si la default_value est zéro et la max_duration est de 16000, alors si l'hôte définit le gpio sur une valeur de un, il doit planifier une autre mise à jour de la broche gpio (à zéro ou à un) dans les 16000 tics d'horloge. Cette fonction de sécurité peut être utilisée avec des broches de chauffage pour s'assurer que l'hôte n'active pas le chauffage puis se déconnecte en le laissant activé.</li>
<li><code>config_pwm_out oid=%c pin=%u cycle_ticks=%u value=%hu default_value=%hu max_duration=%u</code> : cette commande crée un objet interne pour les broches PWM matérielles pour lesquelles l'hôte peut planifier des mises à jour . Son utilisation est analogue à config_digital_out - voir la description des commandes 'set_pwm_out' et 'config_digital_out' pour la description des paramètres.</li>
<li><code>config_analog_in oid=%c pin=%u</code> : Cette commande permet de configurer une broche en mode d'échantillonnage d'entrée analogique. Une fois configurée, la broche peut être échantillonnée à intervalle régulier à l'aide de la commande query_analog_in (voir ci-dessous).</li>
<li><code>config_stepper oid=%c step_pin=%c dir_pin=%c invert_step=%c step_pulse_ticks=%u</code> : Cette commande crée un objet "moteur pas à pas" interne. Les paramètres 'step_pin' et 'dir_pin' spécifient respectivement les broches de pas et de direction ; cette commande les configurera en mode de sortie numérique. Le paramètre 'invert_step' spécifie si une étape se produit sur un front montant (invert_step=0) ou descendant (invert_step=1). Le paramètre 'step_pulse_ticks' spécifie la durée minimale de l'impulsion de pas. Si le mcu exporte la constante 'STEPPER_BOTH_EDGE=1', le réglage step_pulse_ticks=0 et invert_step=-1 sera configuré pour marcher sur les fronts montant et descendant de la broche de pas.</li>
<li><code>config_endstop oid=%c pin=%c pull_up=%c stepper_count=%c</code> : Cette commande crée un objet "endstop" interne. Il est utilisé pour spécifier les broches d'arrêt et pour activer les opérations de "homing" (voir la commande endstop_home ci-dessous). La commande configurera la broche spécifiée en mode d'entrée numérique. Le paramètre 'pull_up' détermine si les résistances pullup fournies par le matériel pour la broche (si disponibles) seront activées. Le paramètre 'stepper_count' spécifie le nombre maximum de pas dont cette butée peut avoir besoin pendant une opération de prise d'origine (voir endstop_home ci-dessous).</li>
<li><code>config_spi oid=%c bus=%u pin=%u mode=%u rate=%u shutdown_msg=%*s</code> : Cette commande crée un objet SPI interne. Il est utilisé avec les commandes spi_transfer et spi_send (voir ci-dessous). Le paramètre "bus" identifie le bus SPI à utiliser (si le microcontrôleur a plus d'un bus SPI disponible). Le paramètre "broche" spécifie la broche de sélection de puce (CS) pour le périphérique. Le paramètre "mode" est le mode SPI (doit être compris entre 0 et 3). Le paramètre "rate" spécifie le débit du bus SPI (en cycles par seconde). Enfin, le paramètre "shutdown_msg" est une commande SPI à envoyer à l'appareil donné si le microcontrôleur passe en état d'arrêt.</li>
<li><code>config_spi_without_cs oid=%c bus=%u mode=%u rate=%u shutdown_msg=%*s</code> : Cette commande est similaire à config_spi, mais sans définition de la broche CS. Il est utile pour les appareils SPI qui n'ont pas de ligne de sélection de puce.</li>
</ul>
<h2 id="commandes-courantes">Commandes courantes<a class="headerlink" href="#commandes-courantes" title="Permanent link">&para;</a></h2>
<p>Cette section répertorie les commandes les plus couramment utilisées. Cela n'intéresse probablement que les développeurs qui cherchent à mieux comprendre Klipper.</p>
<ul>
<li><code>set_digital_out_pwm_cycle oid=%c cycle_ticks=%u</code> : cette commande configure une broche de sortie numérique (telle que créée par config_digital_out) pour utiliser le "PWM logciel". Le 'cycle_ticks' est le nombre de tics d'horloge pour le cycle PWM. Étant donné que la commutation de sortie est implémentée dans le logiciel du microcontrôleur, il est recommandé que 'cycle_ticks' corresponde à un temps de 10 ms ou plus.</li>
<li><code>queue_digital_out oid=%c clock=%u on_ticks=%u</code> : Cette commande permet de planifier une changement d'état d'une broche GPIO de sortie numérique au tick d'horloge donnée. Pour utiliser cette commande, une commande 'config_digital_out' avec le même paramètre 'oid' doit avoir été émise lors de la configuration du microcontrôleur. Si 'set_digital_out_pwm_cycle' a été appelé, alors 'on_ticks' est la durée d'activation (en ticks d'horloge) pour le cycle pwm. Sinon, 'on_ticks' doit être soit 0 (pour basse tension) soit 1 (pour haute tension).</li>
<li><code>queue_pwm_out oid=%c clock=%u value=%hu</code> : planifie un changement sur une broche de sortie PWM matérielle. Voir les commandes 'queue_digital_out' et 'config_pwm_out' pour plus d'informations.</li>
<li><code>query_analog_in oid=%c clock=%u sample_ticks=%u sample_count=%c rest_ticks=%u min_value=%hu max_value=%hu</code> : Cette commande définit une récupération récurrente d'échantillons d'entrée analogique. Pour utiliser cette commande, une commande 'config_analog_in' avec le même paramètre 'oid' doit avoir été émise lors de la configuration du microcontrôleur. Les échantillons commenceront à partir de l'heure 'clock', et ils rapporteront la valeur obtenue à chaque tic d'horloge 'rest_ticks', il suréchantillonnera avec un nombre 'sample_count' d'échantillons et il se mettra en pause pendant le nombre 'sample_ticks' de tic d'horloge entre chaque échantillonnage. Les paramètres 'min_value' et 'max_value' implémentent une fonction de sécurité - le logiciel du microcontrôleur vérifiera que la valeur échantillonnée se situe toujours dans la plage fournie. Ceci est destiné à être utilisé avec des broches rattachées aux thermistances contrôlant les radiateurs - il peut être utilisé pour vérifier qu'un radiateur se trouve dans une plage de température correcte.</li>
<li><code>get_clock</code> : Cette commande amène le microcontrôleur à générer un message de réponse "clock". L'hôte envoie cette commande une fois par seconde pour obtenir la valeur de l'horloge du microcontrôleur et pour estimer la dérive entre les horloges de l'hôte et du microcontrôleur. Il permet à l'hôte d'estimer avec précision l'horloge du microcontrôleur.</li>
</ul>
<h3 id="commandes-de-moteurs-pas-a-pas">Commandes de moteurs pas à pas<a class="headerlink" href="#commandes-de-moteurs-pas-a-pas" title="Permanent link">&para;</a></h3>
<ul>
<li><code>queue_step oid=%c interval=%u count=%hu add=%hi</code> : cette commande planifie le nombre de pas 'count' pour le stepper donné, avec un nombre 'd'intervalle' de ticks d'horloge entre chaque pas. La première étape sera le nombre "d'intervalle" de ticks d'horloge depuis la dernière étape planifiée pour le stepper donné. Si 'add' n'est pas nul, l'intervalle sera ajusté du montant 'add' après chaque pas. Cette commande ajoute la séquence d'intervalle/compte/ajout donnée à une file d'attente des pas. Il peut y avoir des centaines de ces séquences en file d'attente pendant le fonctionnement normal. Une nouvelle séquence est ajoutée à la fin de la file d'attente et lorsque chaque séquence termine son nombre de pas, elle est retirée du début de la file d'attente. Ce système permet au microcontrôleur de mettre en file d'attente potentiellement des centaines de milliers d'étapes, le tout avec des durées fiables et prévisibles.</li>
<li><code>set_next_step_dir oid=%c dir=%c</code> : Cette commande spécifie la valeur du dir_pin que la prochaine commande queue_step utilisera.</li>
<li><code>reset_step_clock oid=%c clock=%u</code> : Normalement, la synchronisation des pas est relative au dernier pas pour un stepper donné. Cette commande réinitialise l'horloge de sorte que l'étape suivante soit relative à l'heure "horloge" fournie. L'hôte n'envoie généralement cette commande qu'au début d'une impression.</li>
<li><code>stepper_get_position oid=%c</code> : Cette commande amène le microcontrôleur à générer un message de réponse "stepper_position" avec la position actuelle du stepper. La position est le nombre total d'étapes générées avec dir=1 moins le nombre total d'étapes générées avec dir=0.</li>
<li><code>endstop_home oid=%c clock=%u sample_ticks=%u sample_count=%c rest_ticks=%u pin_value=%c</code> : Cette commande est utilisée lors des opérations de "homing" des moteurs pas à pas. Pour utiliser cette commande, une commande 'config_endstop' avec le même paramètre 'oid' doit avoir été émise lors de la configuration du microcontrôleur. Lorsque cette commande est invoquée, le microcontrôleur échantillonnera la broche endstop à chaque tic d'horloge 'rest_ticks' et vérifiera si elle a une valeur égale à 'pin_value'. Si la valeur correspond (et continue de correspondre pour 'sample_count' échantillons supplémentaires répartis 'sample_ticks'), alors la file d'attente de mouvement pour le stepper associé sera effacée et le stepper s'arrêtera immédiatement. L'hôte utilise cette commande pour implémenter la prise d'origine - l'hôte demande à la butée d'échantillonner pour le déclencheur de butée, puis il émet une série de commandes queue_step pour déplacer un stepper vers la butée. Une fois que le stepper atteint la butée, le déclencheur sera détecté, le mouvement arrêté et l'hôte notifié.</li>
</ul>
<h3 id="deplacer-la-file-dattente">Déplacer la file d'attente<a class="headerlink" href="#deplacer-la-file-dattente" title="Permanent link">&para;</a></h3>
<p>Chaque commande queue_step utilise une entrée dans la "file d'attente de déplacement" du microcontrôleur. Cette file d'attente est allouée lorsqu'elle reçoit la commande "finalize_config", et elle signale le nombre d'entrées de file d'attente disponibles dans les messages de réponse "config".</p>
<p>Il est de la responsabilité de l'hôte de s'assurer qu'il y a de l'espace disponible dans la file d'attente avant d'envoyer une commande queue_step. Pour ce faire, l'hôte calcule le moment où chaque commande queue_step se termine et planifie de nouvelles commandes queue_step en conséquence.</p>
<h3 id="commandes-spi">Commandes SPI<a class="headerlink" href="#commandes-spi" title="Permanent link">&para;</a></h3>
<ul>
<li><code>spi_transfer oid=%c data=%*s</code> : Cette commande amène le microcontrôleur à envoyer des "données" au périphérique spi spécifié par "oid" et génère un message de réponse "spi_transfer_response" avec les données retournées par le périphérique.</li>
<li><code>spi_send oid=%c data=%*s</code> : Cette commande est similaire à "spi_transfer", mais elle ne génère pas de message "spi_transfer_response".</li>
</ul>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Retour en haut de la page
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Pied de page">
      
        
        <a href="API_Server.html" class="md-footer__link md-footer__link--prev" aria-label="Précédent: Serveur API" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Précédent
              </span>
              Serveur API
            </div>
          </div>
        </a>
      
      
        
        <a href="CANBUS_protocol.html" class="md-footer__link md-footer__link--next" aria-label="Suivant: Protocole CANBUS" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Suivant
              </span>
              Protocole CANBUS
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.top", "search.suggest", "search.highlight", "search.share"], "translations": {"clipboard.copy": "Copier dans le presse-papier", "clipboard.copied": "Copi\u00e9 dans le presse-papier", "search.config.lang": "fr", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Rechercher", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.term.missing": "Non trouv\u00e9", "select.version.title": "S\u00e9lectionner la version"}, "search": "assets/javascripts/workers/search.0bbba5b5.min.js"}</script>
    
    
      <script src="assets/javascripts/bundle.e1a181d9.min.js"></script>
      
    
  </body>
</html>